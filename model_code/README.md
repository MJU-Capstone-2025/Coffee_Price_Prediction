## Attention - LSTM 모델을 활용한 커피 가격 예측 모델
### 🟦 예측 전략 및 목표
- 입력 시퀀스 당 14일 예측 / 7일 예측을 진행함
- 두 예측 결과를 보안적으로 활용해 선제 대응 및 추세적인 상황 판단이 가능하도록 하는 것을 목표로 하였음

|모델|목적|역할|
|----|----|----|
|7일 예측 모델| 민감하게 반응하여 선제 대응|조기 경보 역할|
|14일 예측 모| 지속 가능한 추세인지 확인 |추세 확정 역할|

### 🟦 14일간의 예측 모델
### 예측 결과 그래프

|test data 전 시점 그래프|최근 3달(2024.11.01~) 그래프|
|----|----|
|![image](https://github.com/user-attachments/assets/b1fd8097-b39c-4f8c-ad96-eed047645fa9)|![image](https://github.com/user-attachments/assets/3534c3fd-cb71-49a1-8b47-30d2bd975715)|

### 모델 성능 평가

|RMSE|MAE|
|----|----|
|12.9053|8.9388|

### 마지막 날로부터 14일간의 커피 가격 예측 포함
|예측값 표|그래프(2024.11.01~)|
|----|----|
|![image](https://github.com/user-attachments/assets/7f5438eb-a096-4819-8d26-2cc1f72cc32e)|![image](https://github.com/user-attachments/assets/c77c03f1-21a7-4e36-baf2-52b668e1e788)|


### 🟦 7일간의 예측 모델
### 예측 결과 그래프

|test data 전 시점 그래프|최근 3달(2024.11.01~) 그래프|
|----|----|
|![image](https://github.com/user-attachments/assets/cf349fdd-d6f0-4514-a155-440123a60880)|![image](https://github.com/user-attachments/assets/f1639af1-4e64-4a70-b0e9-b39855cde732)|

### 모델 성능 평가

|RMSE|MAE|
|----|----|
|9.1426|6.6435|

### 마지막 날로부터 14일간의 커피 가격 예측 포함
|예측값 표|그래프(2024.11.01~)|
|----|----|
|![image](https://github.com/user-attachments/assets/a9c55040-ae43-4f93-be3e-96a2ca735354)|![image](https://github.com/user-attachments/assets/d2190c96-7b24-45cb-b312-81c8589b856e)|

### 마지막 날로부터 7일간의 커피 가격 예측 포함
|예측값 표|그래프(2024.11.01~)|
|----|----|
|![image](https://github.com/user-attachments/assets/82663b27-6fa1-4406-b3c4-1d8d184e86b2)|![image](https://github.com/user-attachments/assets/0685e01e-879b-418c-97f5-1f8f0b0c4ea9)|

### 🟦 14일간 vs 7일간 결과 비교
### 차이 요약
| 항목      | 14일간 커피 가격 예측 모델   | 7일간 커피 가격 예측 모델  |
| --------------- | ----------------------- | ----------------------- |
|예측 기간|	한 번에 7일 예측	|한 번에 14일 예측|
|곡선 형태|	더 부드럽고 조심스러움|	더 공격적으로 추세 반영|
|추세|	단기 움직임을 더 잘 따라감|	장기 추세는 그리지만 세밀한 변화 반영 부족|
|미래 구간 불확실성|	예측 폭 좁고 안정적|	예측이 퍼질 가능성 있음|

### 사용 전략
1. 기본적으로 1주 예측 모델 사용
- 변동 예측이 안정적이고, 민감도 적절해 비즈니스 의사 결정에 더 알맞음
- 실제 변동에 근접한 패턴을 그림
2. 2주 예측 결과와 함께 병행해서 사용함
![image](https://github.com/user-attachments/assets/8daa5896-dd8f-4b6f-812b-c6898c5c7711)
- 결과의 추세가 일치하면 신뢰도 상승
- 추세가 다르면 미래 불확실성이 있음, 국면 전환 조짐으로 해석 가능

### 🟦 모델 예측 결과를 통한 활용 전략
### ⭐ 1. 커피 가격 구매 타이밍 결정 보조도구
- 7일 예측이 먼저 변화를 감지하고 14일 예측이 그것을 나중에 따라올 때 확정 신호로 간주함
- 7일 예측 결과에서 전날 대비 오늘 가격이 1% 상승했는지를 먼저 확인한 후 14일 예측 결과에서도 상승했는지를 보고 추세 확정 조건을 달리함
- 최근 14일 평균 대비 고점인지를 확인하여, 고점일 때는 구매 신호가 뜨지 않게함

|조건|시그널|행동|
|----|----|----|
|7일 예측: 상승 + 14일 예측: 상승|	Buy|	미리 사자|
|7일 예측: 상승 + 14일 예측: 하락 또는 변동 미미|	Caution	|기다리거나 일부 구매|
|7일 예측: 하락 + 14일 예측: 하락|	Avoid|하락 기다림|
|기타|	Hold|	특별 행동 없음|

### 결과 해석
![image](https://github.com/user-attachments/assets/d25b2aaf-5273-4f56-b536-5952f70b6697)
### 🔍 전략 요약
- 7일 예측이 민감하게 먼저 반응
- 14일 예측이 추세를 따라오면 확정 시그널 내림

### 🔍 그래프 구성 설명
|항목|설명|
|----|----|
|파란 실선| 실제 커피 가격|
|빨간 점선| 7일간의 예측 모델 결과|
|주황 점선| 14일간의 예측 모델 결과|
|초록 삼각형| Buy 신호 — 가격이 상승할 것으로 예상되니 현재 시점에서 구매하는 것이 좋음|
|노랑 원| Caution — 7일간의 예측 결과로는 상승할 것으로 예측했지만 중기 추세가 따라오지 않음|
|검정 역삼각형| Avoid — 가격이 하락할 것으로 예상되니 현재 시점에서 구매를 하지 않는 것이 좋음|

### 🔍 결과 해석

|구간|전략 신호|실제 가격 흐름|
|----|--------|----|
|11월 중순|	Buy| 추후 가격 더 상승|
|12월 초|	Buy|	상승세 유지|
|2월 초~중순|	Buy|급등|
|3월 초|Avoid|하락 구간 진입|

### ⭐ 2. 예측 분기 감지
- 매 날짜별로 7일 예측값과 14일 예측값의 차이 확인
- 임계값은 차이가 최근 평균 가격(30일간)의 ±2%로 설정
- 임계값을 넘으면 예측 결과의 불확실성(예측 분기)이 있다고 판단
- 두 기간의 예측이 급격히 엇갈릴 때는 변동성 또는 불확실성 급증을 의미하므로 이 경우 사용자는 보수적 접근이 필요
### 결과 해석
![image](https://github.com/user-attachments/assets/a79f8fed-23cf-4d64-81c5-88f8cc383322)
### 🔍 전략 요약
- 두 예측 간 차이가 커질 때 예측 불일치 구간으로 판단
- 분기 신호는  확정된 매수/회피 판단이 아닌 보수적 접근 또는 판단 보류를 유도하는 경고성 보조 시그널
- 사용자가 판단하려는 시점이 임계값이 넘은 시점이라면 사용자는 예측 결과에 대해 보수적인 판단을 진행
### 🔍 그래프 구성 설명
|항목|방식|설명|의미|
|----|----|----|----|
|빨간 점선 (상단 임계선)|각 시점의 최근 30일간의 실제 커피 가격 평균 × +2%| 이 선 초과 시 단기 예측이 과도하게 높다고 판단| 과열 신호 (조심)|
|파란 점선 (하단 임계선)|각 시점의 최근 30일간의 실제 커피 가격 평균 × -2%|이 선 하회 시 단기 예측이 과도하게 낮다고 판단| 비관적 신호 (저평가 가능성)|
### 🔍 결과 해석

|구간|신호|의미|
|----|--------|----|
|2024년 12월/2025년 2월|예측간 차이 +10을 넘으며 단기 예측 과열 구간에 진입|단기 상승 낙관이 과도함|
|2025년 2월 말 ~ 3월|예측간 차이 -20까지 급락|과도한 낙폭 감지 구간|

### ⭐ 3. 예측 신뢰도 지표
- 매 날짜별로 7일 예측값과 14일 예측값간의 일치 정도 확인
- 예측의 신뢰 가능성 및 확신 수준 정량
- 기준 값을 0.95로 설정하여 해당 기준보다 낮을 수록 예측 불안정성이 높다고 판단
### 결과 해석
![image](https://github.com/user-attachments/assets/b1ba11b7-626a-45f7-a780-a8758f2f352d)
### 🔍 전략 요약
- 예측의 일관성 검증 도구로 활용해 사용자가 리스크를 조절할 수 있도록 함
- 예측이 서로 유사할수록 모델의 방향성에 대한 확신이 높음
- 반대로 유사도가 낮으면 예측이 불안정하거나 경계적 흐름에 있다는 의미
### 🔍 그래프 구성 설명
|항목|의미|설명|
|----|----|----|
|초록색 선 (0.95 이상)|예측 일치|강한 확신|
|빨간색 선 (0.80 이하)|예측 불일치| 약한 확신|
|중간 영역 (0.8 ~ 0.95)|부분적 확신|
### 🔍 결과 해석

|구간|신호|의미|
|----|--------|----|
|대부분의 시점|초록색 선 넘음|7일간, 14일간의 예측이 거의 동일한 방향성을 가지고 있음|
|2024년 5월, 12월|초록색 선 넘지 못함|단기와 중기 예측이 엇갈릴 가능성이 있어 전략의 신중함 필요|

- 0.8 아래로 내려간 경우 없으므로 극단적인 예측 불일치는 거의 없음
- 모델 간 방향성은 비슷하다는 것을 보여줌.

### ⭐ 4. 예측 분기 감지 & 신뢰도 지표 이용한 구매 결정 보조도구
- 전략 2,3의 결과를 이용하여 전략 1을 고도화
- 7일 예측과 14일 예측 간 예측 간 차이가 커서 해석이 엇갈릴 가능성 있음(전략 2에서 임계값 초과)/Confidence가 낮음(전략 3에서 기준값 0.95를 넘지 못함) >> 해당 경우에는 "Buy" 또는 "Avoid" 신호를 Caution으로 대체
### 결과 해석
![image](https://github.com/user-attachments/assets/9e3dc93e-af9a-4e21-b251-d490d6a62377)
### 🔍 전략 요약
- 단기(7일)예측과 장기(14일)예측 결과의 방향성 일치 여부를 통해 예측 불일치 경고 감지
- 예측 간 차이가 임계값을 넘을 경우 사용자에게 주의 환기
- 두 지표를 병렬 활용하여 사용자는 단기 급변 신호와 모델의 예측 확신 정도를 모두 고려하여 구매 보조 도구 활용 가능
- 결과적으로 예측 신호를 반영한 구매 결정 보조도구, 예측 신호 + 신뢰 지표 + 분기 탐지를 함께고려한 구매 결정 보조도구를 통해 다층적 의사결정 가능

### 🔍 그래프 구성 설명
|항목|설명|
|----|----|
|파란 실선| 실제 커피 가격|
|빨간 점선| 7일간의 예측 모델 결과|
|주황 점선| 14일간의 예측 모델 결과|
|초록 삼각형| Buy 신호 — 가격이 상승할 것으로 예상되니 현재 시점에서 구매하는 것이 좋음|
|노랑 원| Caution — 7일간의 예측 결과로는 상승할 것으로 예측했지만 중기 추세가 따라오지 않음|
|검정 역삼각형| Avoid — 가격이 하락할 것으로 예상되니 현재 시점에서 구매를 하지 않는 것이 좋음|
|파랑 원| Caution(divergence) - 단기/중기 예측 간 분기 존재하므로 방향성 판단에 유의해야함|
|주황 원| Caution(uncertainty) - 예측 신뢰도 부족으로 신호가 불안정하므로 신중한 판단 요구됨|

### 🔍 결과 해석

|구간|이전 신호|현재 신호|실제 가격 흐름|
|----|--------|----|----|
|2024년 11월| Buy | Caution(uncertainty) | 가격이 하락하려고 하기 전|
|2025년 2월 말| Avoid |Caution(divergence) | 가격이 상승하려고 하기 전|

- 예측 분기 감지와 신뢰도 지표는 기존의 Buy/Avoid 시그널을 대체하는 것이 아니라 이를 보완하는 보조 판단 도구여아함
- 지표를 적용함으로써 기존에 명확한 시그널이 나왔던 구간에서도 Caution 신호가 나타날 수 있으므로 이는 오히려 예측에 대한 신중함을 더해주는 역할을 함
- 커피 가격 구매 타이밍 결정 보조도구와 예측 분기 감지 및 신뢰도 지표 기반의 보조 도구를 함께 고려함으로써 급격한 시장 전환이나 경계 구간에서 더 정교하고 신중한 구매 판단을 가능하게 함
